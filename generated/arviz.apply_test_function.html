<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>arviz.apply_test_function &#8212; ArviZ 0.6.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="arviz.compare" href="arviz.compare.html" />
    <link rel="prev" title="arviz.plot_violin" href="arviz.plot_violin.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/logo.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.6.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../examples/index.html">Gallery</a></li>
                <li><a href="../notebooks/Introduction.html">Quickstart</a></li>
                <li><a href="../notebooks/InferenceDataCookbook.html">Cookbook</a></li>
                <li><a href="../notebooks/XarrayforArviZ.html">InferenceData</a></li>
                <li><a href="../notebooks/Numba.html">Numba</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../usage.html">Usage</a></li>
                <li><a href="../about.html">About</a></li>
            
            
              
              
            
            
            
                <a class="icon" href="https://github.com/arviz-devs/arviz">
                    <img src="../_static/GitHub-Mark-32px.png"
                    style="position: absolute; top: 15px; right: 30px; border: 0;"></a>
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="arviz-apply-test-function">
<h1>arviz.apply_test_function<a class="headerlink" href="#arviz-apply-test-function" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="arviz.apply_test_function">
<code class="sig-prename descclassname">arviz.</code><code class="sig-name descname">apply_test_function</code><span class="sig-paren">(</span><em class="sig-param">idata</em>, <em class="sig-param">func</em>, <em class="sig-param">group='both'</em>, <em class="sig-param">var_names=None</em>, <em class="sig-param">pointwise=False</em>, <em class="sig-param">out_data_shape=None</em>, <em class="sig-param">out_pp_shape=None</em>, <em class="sig-param">out_name_data='T'</em>, <em class="sig-param">out_name_pp=None</em>, <em class="sig-param">func_args=None</em>, <em class="sig-param">func_kwargs=None</em>, <em class="sig-param">ufunc_kwargs=None</em>, <em class="sig-param">wrap_data_kwargs=None</em>, <em class="sig-param">wrap_pp_kwargs=None</em>, <em class="sig-param">inplace=True</em>, <em class="sig-param">overwrite=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arviz/stats/stats.html#apply_test_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arviz.apply_test_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a Bayesian test function to an InferenceData object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>idata</strong><span class="classifier">InferenceData</span></dt><dd><p>InferenceData object on which to apply the test function. This function will add
new variables to the InferenceData object to store the result without modifying the
existing ones.</p>
</dd>
<dt><strong>func</strong><span class="classifier">callable</span></dt><dd><p>Callable that calculates the test function. It must have the following call signature
<code class="docutils literal notranslate"><span class="pre">func(y,</span> <span class="pre">theta,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)</span></code> (where <code class="docutils literal notranslate"><span class="pre">y</span></code> is the observed data or posterior
predictive and <code class="docutils literal notranslate"><span class="pre">theta</span></code> the model parameters) even if not all the arguments are
used.</p>
</dd>
<dt><strong>group</strong><span class="classifier">str, optional</span></dt><dd><p>Group on which to apply the test function. Can be observed_data, posterior_predictive
or both.</p>
</dd>
<dt><strong>var_names</strong><span class="classifier">dict group -&gt; var_names, optional</span></dt><dd><p>Mapping from group name to the variables to be passed to func. It can be a dict of
strings or lists of strings. There is also the option of using <code class="docutils literal notranslate"><span class="pre">both</span></code> as key,
in which case, the same variables are used in observed data and posterior predictive
groups</p>
</dd>
<dt><strong>pointwise</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, apply the test function to each observation and sample, otherwise, apply
test function to each sample.</p>
</dd>
<dt><strong>out_data_shape, out_pp_shape</strong><span class="classifier">tuple, optional</span></dt><dd><p>Output shape of the test function applied to the observed/posterior predictive data.
If None, the default depends on the value of pointwise.</p>
</dd>
<dt><strong>out_name_data, out_name_pp</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the variables to add to the observed_data and posterior_predictive datasets
respectively. <code class="docutils literal notranslate"><span class="pre">out_name_pp</span></code> can be <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case will be taken equal to
<code class="docutils literal notranslate"><span class="pre">out_name_data</span></code>.</p>
</dd>
<dt><strong>func_args</strong><span class="classifier">sequence, optional</span></dt><dd><p>Passed as is to <code class="docutils literal notranslate"><span class="pre">func</span></code></p>
</dd>
<dt><strong>func_kwargs</strong><span class="classifier">mapping, optional</span></dt><dd><p>Passed as is to <code class="docutils literal notranslate"><span class="pre">func</span></code></p>
</dd>
<dt><strong>wrap_data_kwargs, wrap_pp_kwargs</strong><span class="classifier">mapping, optional</span></dt><dd><p>kwargs passed to <code class="docutils literal notranslate"><span class="pre">az.stats.wrap_xarray_ufunc</span></code>. By default, some suitable input_core_dims
are used.</p>
</dd>
<dt><strong>inplace</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, add the variables inplace, othewise, return a copy of idata with the variables
added.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool, optional</span></dt><dd><p>Overwrite data in case <code class="docutils literal notranslate"><span class="pre">out_name_data</span></code> or <code class="docutils literal notranslate"><span class="pre">out_name_pp</span></code> are already variables in
dataset. If <code class="docutils literal notranslate"><span class="pre">None</span></code> it will be the opposite of inplace.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>idata</strong><span class="classifier">InferenceData</span></dt><dd><p>Output InferenceData object. If <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code>, it is the same input object modified
inplace.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function is provided for convenience to wrap scalar or functions working on low
dims to inference data object. It is not optimized to be faster nor as fast as vectorized
computations.</p>
<p class="rubric">Examples</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">apply_test_function</span></code> to wrap <code class="docutils literal notranslate"><span class="pre">np.min</span></code> for illustration purposes. And plot the
results.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">arviz</span> <span class="k">as</span> <span class="nn">az</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idata</span> <span class="o">=</span> <span class="n">az</span><span class="o">.</span><span class="n">load_arviz_data</span><span class="p">(</span><span class="s2">&quot;centered_eight&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">az</span><span class="o">.</span><span class="n">apply_test_function</span><span class="p">(</span><span class="n">idata</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asscalar</span><span class="p">(</span><span class="n">idata</span><span class="o">.</span><span class="n">observed_data</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">az</span><span class="o">.</span><span class="n">plot_posterior</span><span class="p">(</span><span class="n">idata</span><span class="p">,</span> <span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">],</span> <span class="n">group</span><span class="o">=</span><span class="s2">&quot;posterior_predictive&quot;</span><span class="p">,</span> <span class="n">ref_val</span><span class="o">=</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/arviz-apply_test_function-1.png" src="../_images/arviz-apply_test_function-1.png" />
</div>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/arviz.apply_test_function.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2018, ArviZ devs.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>